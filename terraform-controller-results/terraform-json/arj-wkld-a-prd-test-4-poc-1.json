{"format_version":"1.2","terraform_version":"1.11.0","variables":{"accounts":{"value":{"802860742843":{"account_id":"802860742843","account_name":"arj-wkld-a-prd","environment":"production","id":"802860742843","regions":["us-east-1"]}}},"assume_role_name":{"value":"TerraformExecutionRole"},"aws_regions":{"value":{"ew1":{"code":"ew1","name":"eu-west-1"},"use1":{"code":"use1","name":"us-east-1"},"usw2":{"code":"usw2","name":"us-west-2"}}},"common_tags":{"value":{"Account":"arj-wkld-a-prd","Environment":"production","ManagedBy":"terraform","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1"}},"iam_policies":{"value":{}},"iam_role_name":{"value":""},"iam_roles":{"value":{}},"iam_users":{"value":{}},"kms_key_id":{"value":""},"kms_keys":{"value":{}},"s3_buckets":{"value":{"test-4-poc-1":{"account_key":"802860742843","bucket_name":"arj-test-4-poc-1-use1-prd","bucket_policy_file":"Accounts/test-4-poc-1/test-4-poc-1.json","encryption":{"bucket_key_enabled":true,"kms_master_key_id":"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749","sse_algorithm":"aws:kms"},"force_destroy":false,"public_access_block":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"region_code":"use1","tags":{"AccessType":"vpc-endpoint-only","Account":"802860742843","Environment":"production","ManagedBy":"terraform","Name":"arj-test-4-poc-1-use1-prd","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1","VPCAccess":"true"},"versioning_enabled":true}}},"terraform_session_name":{"value":"terraform-deployment-session"},"update_kms_policy":{"value":false},"yaml_config_file":{"value":""}},"planned_values":{"outputs":{"bucket_cors":{"sensitive":false,"type":["object",{}],"value":{}},"bucket_encryption":{"sensitive":false},"bucket_lifecycle":{"sensitive":false},"bucket_logging":{"sensitive":false,"type":["object",{}],"value":{}},"bucket_notifications":{"sensitive":false,"type":["object",{}],"value":{}},"bucket_policies":{"sensitive":false},"bucket_public_access_block":{"sensitive":false,"type":["object",{}],"value":{}},"bucket_replication":{"sensitive":false,"type":["object",{}],"value":{}},"bucket_versioning":{"sensitive":false},"bucket_website_endpoints":{"sensitive":false,"type":["object",{}],"value":{}},"debug_configuration":{"sensitive":false,"type":["object",{"iam_module_created":"bool","iam_policies_count":"number","iam_role_keys":["tuple",[]],"iam_roles_count":"number","iam_user_keys":["tuple",[]],"iam_users_count":"number","kms_key_keys":["tuple",[]],"kms_keys_count":"number","kms_modules_count":"number","s3_bucket_keys":["tuple",["string"]],"s3_buckets_count":"number","s3_module_created":"bool"}],"value":{"iam_module_created":false,"iam_policies_count":0,"iam_role_keys":[],"iam_roles_count":0,"iam_user_keys":[],"iam_users_count":0,"kms_key_keys":[],"kms_keys_count":0,"kms_modules_count":0,"s3_bucket_keys":["test-4-poc-1"],"s3_buckets_count":1,"s3_module_created":true}},"deployment_summary":{"sensitive":false},"iam_access_key_secrets":{"sensitive":true,"type":["object",{}],"value":{}},"iam_access_keys":{"sensitive":true,"type":["object",{}],"value":{}},"iam_role_arns":{"sensitive":false,"type":["object",{}],"value":{}},"iam_role_names":{"sensitive":false,"type":["tuple",[]],"value":[]},"iam_roles":{"sensitive":false,"type":["object",{}],"value":{}},"iam_user_arns":{"sensitive":false,"type":["object",{}],"value":{}},"iam_user_names":{"sensitive":false,"type":["tuple",[]],"value":[]},"iam_user_passwords":{"sensitive":true,"type":["object",{}],"value":{}},"iam_users":{"sensitive":false,"type":["object",{}],"value":{}},"kms_key_aliases":{"sensitive":false,"type":["object",{}],"value":{}},"kms_key_arns":{"sensitive":false,"type":["object",{}],"value":{}},"kms_key_ids":{"sensitive":false,"type":["object",{}],"value":{}},"kms_keys":{"sensitive":false,"type":["object",{}],"value":{}},"resource_map":{"sensitive":false},"s3_bucket_arns":{"sensitive":false},"s3_bucket_domains":{"sensitive":false},"s3_bucket_names":{"sensitive":false},"s3_buckets":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.s3[0].aws_s3_bucket.buckets[\"test-4-poc-1\"]","mode":"managed","type":"aws_s3_bucket","name":"buckets","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"arj-test-4-poc-1-use1-prd","force_destroy":false,"region":"us-east-1","tags":{"AccessType":"vpc-endpoint-only","Account":"802860742843","Environment":"production","ManagedBy":"terraform","Name":"arj-test-4-poc-1-use1-prd","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1","VPCAccess":"true"},"tags_all":{"AccessType":"vpc-endpoint-only","Account":"802860742843","Environment":"production","ManagedBy":"terraform","Name":"arj-test-4-poc-1-use1-prd","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1","VPCAccess":"true"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"module.s3[0].aws_s3_bucket_lifecycle_configuration.lifecycle[\"test-4-poc-1\"]","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"lifecycle","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"region":"us-east-1","rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"intelligent-tiering-default","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":0,"storage_class":"INTELLIGENT_TIERING"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_values":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{}]}]}},{"address":"module.s3[0].aws_s3_bucket_policy.bucket_policies[\"test-4-poc-1\"]","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policies","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy":"{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\"],\"Condition\":{\"ArnNotLike\":{\"aws:PrincipalArn\":\"arn:aws:iam::802860742843:role/TerraformExecutionRole\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"arn:aws:s3:::arj-test-4-poc-1-use1-prd\"]},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\"],\"Condition\":{\"StringNotEquals\":{\"aws:SourceVpce\":[\"vpce-use1-interface-s3-shared\",\"vpce-useast1-gateway-XXXXXXXX\"]}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"arn:aws:s3:::arj-test-4-poc-1-use1-prd\"]},{\"Action\":\"s3:PutObject\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption-aws-kms-key-id\":\"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"Sid\":\"DenyEncryptionHeaderWithoutAWSKMS\"}],\"Version\":\"2012-10-17\"}","region":"us-east-1"},"sensitive_values":{}},{"address":"module.s3[0].aws_s3_bucket_server_side_encryption_configuration.encryption[\"test-4-poc-1\"]","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"encryption","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"region":"us-east-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749","sse_algorithm":"aws:kms"}],"blocked_encryption_types":[],"bucket_key_enabled":true}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]}},{"address":"module.s3[0].aws_s3_bucket_versioning.versioning[\"test-4-poc-1\"]","mode":"managed","type":"aws_s3_bucket_versioning","name":"versioning","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"region":"us-east-1","versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}}],"address":"module.s3[0]"}]}},"resource_changes":[{"address":"module.s3[0].aws_s3_bucket.buckets[\"test-4-poc-1\"]","module_address":"module.s3[0]","mode":"managed","type":"aws_s3_bucket","name":"buckets","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"arj-test-4-poc-1-use1-prd","force_destroy":false,"region":"us-east-1","tags":{"AccessType":"vpc-endpoint-only","Account":"802860742843","Environment":"production","ManagedBy":"terraform","Name":"arj-test-4-poc-1-use1-prd","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1","VPCAccess":"true"},"tags_all":{"AccessType":"vpc-endpoint-only","Account":"802860742843","Environment":"production","ManagedBy":"terraform","Name":"arj-test-4-poc-1-use1-prd","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1","VPCAccess":"true"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_region":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.s3[0].aws_s3_bucket_lifecycle_configuration.lifecycle[\"test-4-poc-1\"]","module_address":"module.s3[0]","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"lifecycle","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"us-east-1","rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"intelligent-tiering-default","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":0,"storage_class":"INTELLIGENT_TIERING"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"after_unknown":{"bucket":true,"expected_bucket_owner":true,"id":true,"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{}]}]}}},{"address":"module.s3[0].aws_s3_bucket_policy.bucket_policies[\"test-4-poc-1\"]","module_address":"module.s3[0]","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policies","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy":"{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\"],\"Condition\":{\"ArnNotLike\":{\"aws:PrincipalArn\":\"arn:aws:iam::802860742843:role/TerraformExecutionRole\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"arn:aws:s3:::arj-test-4-poc-1-use1-prd\"]},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\"],\"Condition\":{\"StringNotEquals\":{\"aws:SourceVpce\":[\"vpce-use1-interface-s3-shared\",\"vpce-useast1-gateway-XXXXXXXX\"]}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"arn:aws:s3:::arj-test-4-poc-1-use1-prd\"]},{\"Action\":\"s3:PutObject\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption-aws-kms-key-id\":\"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"Sid\":\"DenyEncryptionHeaderWithoutAWSKMS\"}],\"Version\":\"2012-10-17\"}","region":"us-east-1"},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.s3[0].aws_s3_bucket_server_side_encryption_configuration.encryption[\"test-4-poc-1\"]","module_address":"module.s3[0]","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"encryption","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"region":"us-east-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749","sse_algorithm":"aws:kms"}],"blocked_encryption_types":[],"bucket_key_enabled":true}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]}}},{"address":"module.s3[0].aws_s3_bucket_versioning.versioning[\"test-4-poc-1\"]","module_address":"module.s3[0]","mode":"managed","type":"aws_s3_bucket_versioning","name":"versioning","index":"test-4-poc-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"region":"us-east-1","versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}}],"output_changes":{"bucket_cors":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"bucket_encryption":{"actions":["create"],"before":null,"after":{"test-4-poc-1":{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749","sse_algorithm":"aws:kms"}],"blocked_encryption_types":[],"bucket_key_enabled":true}]}},"after_unknown":{"test-4-poc-1":{"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]}},"before_sensitive":false,"after_sensitive":false},"bucket_lifecycle":{"actions":["create"],"before":null,"after":{"test-4-poc-1":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"intelligent-tiering-default","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":0,"storage_class":"INTELLIGENT_TIERING"}]}]}},"after_unknown":{"test-4-poc-1":{"id":true,"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{}]}]}},"before_sensitive":false,"after_sensitive":false},"bucket_logging":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"bucket_notifications":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"bucket_policies":{"actions":["create"],"before":null,"after":{"test-4-poc-1":{"policy":"{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\"],\"Condition\":{\"ArnNotLike\":{\"aws:PrincipalArn\":\"arn:aws:iam::802860742843:role/TerraformExecutionRole\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"arn:aws:s3:::arj-test-4-poc-1-use1-prd\"]},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:DeleteObject\"],\"Condition\":{\"StringNotEquals\":{\"aws:SourceVpce\":[\"vpce-use1-interface-s3-shared\",\"vpce-useast1-gateway-XXXXXXXX\"]}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"arn:aws:s3:::arj-test-4-poc-1-use1-prd\"]},{\"Action\":\"s3:PutObject\",\"Condition\":{\"StringNotEquals\":{\"s3:x-amz-server-side-encryption-aws-kms-key-id\":\"arn:aws:kms:us-east-1:802860742843:key/e978f725-a300-4993-9c85-1b2767982749\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":\"arn:aws:s3:::arj-test-4-poc-1-use1-prd/*\",\"Sid\":\"DenyEncryptionHeaderWithoutAWSKMS\"}],\"Version\":\"2012-10-17\"}"}},"after_unknown":{"test-4-poc-1":{"id":true}},"before_sensitive":false,"after_sensitive":false},"bucket_public_access_block":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"bucket_replication":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"bucket_versioning":{"actions":["create"],"before":null,"after":{"test-4-poc-1":{"versioning_configuration":[{"status":"Enabled"}]}},"after_unknown":{"test-4-poc-1":{"id":true,"versioning_configuration":[{"mfa_delete":true}]}},"before_sensitive":false,"after_sensitive":false},"bucket_website_endpoints":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"debug_configuration":{"actions":["no-op"],"before":{"iam_module_created":false,"iam_policies_count":0,"iam_role_keys":[],"iam_roles_count":0,"iam_user_keys":[],"iam_users_count":0,"kms_key_keys":[],"kms_keys_count":0,"kms_modules_count":0,"s3_bucket_keys":["test-4-poc-1"],"s3_buckets_count":1,"s3_module_created":true},"after":{"iam_module_created":false,"iam_policies_count":0,"iam_role_keys":[],"iam_roles_count":0,"iam_user_keys":[],"iam_users_count":0,"kms_key_keys":[],"kms_keys_count":0,"kms_modules_count":0,"s3_bucket_keys":["test-4-poc-1"],"s3_buckets_count":1,"s3_module_created":true},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"deployment_summary":{"actions":["create"],"before":null,"after":{"account_id":"802860742843","iam_policies":0,"iam_roles":0,"iam_users":0,"kms_keys":0,"region":"us-east-1","s3_buckets":1},"after_unknown":{"deployed_at":true},"before_sensitive":false,"after_sensitive":false},"iam_access_key_secrets":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":true,"after_sensitive":true},"iam_access_keys":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":true,"after_sensitive":true},"iam_role_arns":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"iam_role_names":{"actions":["no-op"],"before":[],"after":[],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"iam_roles":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"iam_user_arns":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"iam_user_names":{"actions":["no-op"],"before":[],"after":[],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"iam_user_passwords":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":true,"after_sensitive":true},"iam_users":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"kms_key_aliases":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"kms_key_arns":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"kms_key_ids":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"kms_keys":{"actions":["no-op"],"before":{},"after":{},"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"resource_map":{"actions":["create"],"before":null,"after":{"iam_roles":{},"iam_users":{},"kms_keys":{},"s3_buckets":{"test-4-poc-1":{}}},"after_unknown":{"iam_roles":{},"iam_users":{},"kms_keys":{},"s3_buckets":{"test-4-poc-1":{"arn":true,"id":true}}},"before_sensitive":false,"after_sensitive":false},"s3_bucket_arns":{"actions":["create"],"before":null,"after":{},"after_unknown":{"test-4-poc-1":true},"before_sensitive":false,"after_sensitive":false},"s3_bucket_domains":{"actions":["create"],"before":null,"after":{},"after_unknown":{"test-4-poc-1":true},"before_sensitive":false,"after_sensitive":false},"s3_bucket_names":{"actions":["create"],"before":null,"after":{},"after_unknown":{"test-4-poc-1":true},"before_sensitive":false,"after_sensitive":false},"s3_buckets":{"actions":["create"],"before":null,"after":{"test-4-poc-1":{"region":"us-east-1","tags_all":{"AccessType":"vpc-endpoint-only","Account":"802860742843","Environment":"production","ManagedBy":"terraform","Name":"arj-test-4-poc-1-use1-prd","Owner":"pra","Project":"test-4-poc-1","Region":"us-east-1","VPCAccess":"true"}}},"after_unknown":{"test-4-poc-1":{"arn":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"hosted_zone_id":true,"id":true,"tags_all":{}}},"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.11.0","values":{"outputs":{"bucket_cors":{"sensitive":false,"value":{},"type":["object",{}]},"bucket_logging":{"sensitive":false,"value":{},"type":["object",{}]},"bucket_notifications":{"sensitive":false,"value":{},"type":["object",{}]},"bucket_public_access_block":{"sensitive":false,"value":{},"type":["object",{}]},"bucket_replication":{"sensitive":false,"value":{},"type":["object",{}]},"bucket_website_endpoints":{"sensitive":false,"value":{},"type":["object",{}]},"debug_configuration":{"sensitive":false,"value":{"iam_module_created":false,"iam_policies_count":0,"iam_role_keys":[],"iam_roles_count":0,"iam_user_keys":[],"iam_users_count":0,"kms_key_keys":[],"kms_keys_count":0,"kms_modules_count":0,"s3_bucket_keys":["test-4-poc-1"],"s3_buckets_count":1,"s3_module_created":true},"type":["object",{"iam_module_created":"bool","iam_policies_count":"number","iam_role_keys":["tuple",[]],"iam_roles_count":"number","iam_user_keys":["tuple",[]],"iam_users_count":"number","kms_key_keys":["tuple",[]],"kms_keys_count":"number","kms_modules_count":"number","s3_bucket_keys":["tuple",["string"]],"s3_buckets_count":"number","s3_module_created":"bool"}]},"iam_access_key_secrets":{"sensitive":true,"value":{},"type":["object",{}]},"iam_access_keys":{"sensitive":true,"value":{},"type":["object",{}]},"iam_role_arns":{"sensitive":false,"value":{},"type":["object",{}]},"iam_role_names":{"sensitive":false,"value":[],"type":["tuple",[]]},"iam_roles":{"sensitive":false,"value":{},"type":["object",{}]},"iam_user_arns":{"sensitive":false,"value":{},"type":["object",{}]},"iam_user_names":{"sensitive":false,"value":[],"type":["tuple",[]]},"iam_user_passwords":{"sensitive":true,"value":{},"type":["object",{}]},"iam_users":{"sensitive":false,"value":{},"type":["object",{}]},"kms_key_aliases":{"sensitive":false,"value":{},"type":["object",{}]},"kms_key_arns":{"sensitive":false,"value":{},"type":["object",{}]},"kms_key_ids":{"sensitive":false,"value":{},"type":["object",{}]},"kms_keys":{"sensitive":false,"value":{},"type":["object",{}]}},"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"802860742843","arn":"arn:aws:sts::802860742843:assumed-role/TerraformExecutionRole/terraform-deployment-session","id":"802860742843","user_id":"AROA3V3R2XC5QYQW7UXLX:terraform-deployment-session"},"sensitive_values":{}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1","region":"us-east-1"},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","version_constraint":"~\u003e 2.6"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 6.19","expressions":{"assume_role":[{"role_arn":{"references":["var.accounts","var.s3_buckets","var.s3_buckets","var.assume_role_name"]},"session_name":{"references":["var.terraform_session_name"]}}],"region":{"references":["var.aws_regions","var.s3_buckets","var.s3_buckets"]}}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.6"}},"root_module":{"outputs":{"bucket_cors":{"expression":{"references":["module.s3","module.s3[0].bucket_cors","module.s3[0]"]},"description":"Map of S3 bucket CORS configurations"},"bucket_encryption":{"expression":{"references":["module.s3","module.s3[0].bucket_encryption","module.s3[0]"]},"description":"Map of S3 bucket encryption configurations"},"bucket_lifecycle":{"expression":{"references":["module.s3","module.s3[0].bucket_lifecycle","module.s3[0]"]},"description":"Map of S3 bucket lifecycle configurations"},"bucket_logging":{"expression":{"references":["module.s3","module.s3[0].bucket_logging","module.s3[0]"]},"description":"Map of S3 bucket logging configurations"},"bucket_notifications":{"expression":{"references":["module.s3","module.s3[0].bucket_notifications","module.s3[0]"]},"description":"Map of S3 bucket notification configurations"},"bucket_policies":{"expression":{"references":["module.s3","module.s3[0].bucket_policies","module.s3[0]"]},"description":"Map of S3 bucket policies"},"bucket_public_access_block":{"expression":{"references":["module.s3","module.s3[0].bucket_public_access_block","module.s3[0]"]},"description":"Map of S3 bucket public access block configurations"},"bucket_replication":{"expression":{"references":["module.s3","module.s3[0].bucket_replication","module.s3[0]"]},"description":"Map of S3 bucket replication configurations"},"bucket_versioning":{"expression":{"references":["module.s3","module.s3[0].bucket_versioning","module.s3[0]"]},"description":"Map of S3 bucket versioning configurations"},"bucket_website_endpoints":{"expression":{"references":["module.s3","module.s3[0].bucket_website_endpoints","module.s3[0]"]},"description":"Map of S3 bucket website endpoints"},"debug_configuration":{"expression":{"references":["local.processed_s3_buckets","local.processed_kms_keys","local.merged_iam_users","local.merged_iam_roles","local.merged_iam_policies","local.processed_s3_buckets","local.processed_kms_keys","local.merged_iam_users","local.merged_iam_roles","module.s3","module.kms","module.iam"]},"description":"Debug information about the deployment configuration"},"deployment_summary":{"expression":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","data.aws_region.current.id","data.aws_region.current","local.processed_s3_buckets","local.processed_kms_keys","local.merged_iam_users","local.merged_iam_roles","local.merged_iam_policies"]},"description":"Summary of all deployed resources"},"iam_access_key_secrets":{"sensitive":true,"expression":{"references":["module.iam","module.iam[0].access_key_secrets","module.iam[0]"]},"description":"IAM user access key secrets"},"iam_access_keys":{"sensitive":true,"expression":{"references":["module.iam","module.iam[0].access_key_ids","module.iam[0]"]},"description":"IAM user access key IDs (secrets are sensitive)"},"iam_role_arns":{"expression":{"references":["module.iam","module.iam[0].role_arns","module.iam[0]"]},"description":"Map of IAM role ARNs"},"iam_role_names":{"expression":{"references":["module.iam","module.iam[0].roles","module.iam[0]"]},"description":"List of IAM role names"},"iam_roles":{"expression":{"references":["module.iam","module.iam[0].roles","module.iam[0]"]},"description":"Complete IAM role information"},"iam_user_arns":{"expression":{"references":["module.iam","module.iam[0].user_arns","module.iam[0]"]},"description":"Map of IAM user ARNs"},"iam_user_names":{"expression":{"references":["module.iam","module.iam[0].users","module.iam[0]"]},"description":"List of IAM user names"},"iam_user_passwords":{"sensitive":true,"expression":{"references":["module.iam","module.iam[0].login_profile_passwords","module.iam[0]"]},"description":"IAM user console passwords"},"iam_users":{"expression":{"references":["module.iam","module.iam[0].users","module.iam[0]"]},"description":"Complete IAM user information"},"kms_key_aliases":{"expression":{"references":["module.kms"]},"description":"Map of KMS key aliases"},"kms_key_arns":{"expression":{"references":["module.kms"]},"description":"Map of KMS key ARNs for bucket encryption configuration"},"kms_key_ids":{"expression":{"references":["module.kms"]},"description":"Map of KMS key IDs for easy reference"},"kms_keys":{"expression":{"references":["module.kms"]},"description":"Complete KMS key information"},"resource_map":{"expression":{"references":["module.s3","module.s3[0].s3_buckets","module.s3[0]","module.kms","module.iam","module.iam[0].users","module.iam[0]","module.iam","module.iam[0].roles","module.iam[0]"]},"description":"Quick reference map of all resource IDs and ARNs"},"s3_bucket_arns":{"expression":{"references":["module.s3","module.s3[0].s3_buckets","module.s3[0]"]},"description":"Map of S3 bucket ARNs"},"s3_bucket_domains":{"expression":{"references":["module.s3","module.s3[0].s3_buckets","module.s3[0]"]},"description":"Map of S3 bucket regional domain names"},"s3_bucket_names":{"expression":{"references":["module.s3","module.s3[0].s3_buckets","module.s3[0]"]},"description":"Map of S3 bucket names (IDs)"},"s3_buckets":{"expression":{"references":["module.s3","module.s3[0].s3_buckets","module.s3[0]"]},"description":"Complete S3 bucket information"}},"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"module_calls":{"iam":{"source":"git::https://github.com/Terraform-centilazed-pipline/tf-module.git//Module/IAM","expressions":{"policies":{"references":["local.merged_iam_policies"]},"roles":{"references":["local.merged_iam_roles"]},"tags":{"references":["var.common_tags"]},"users":{"references":["local.merged_iam_users"]}},"count_expression":{"references":["local.merged_iam_users","local.merged_iam_roles","local.merged_iam_policies"]},"module":{"outputs":{"access_key_encrypted_secrets":{"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of encrypted access key secrets"},"access_key_fingerprints":{"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of PGP key fingerprints used to encrypt secrets"},"access_key_ids":{"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of access key IDs"},"access_key_secrets":{"sensitive":true,"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of access key secrets"},"access_key_ses_smtp_passwords_v4":{"sensitive":true,"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of SES SMTP passwords converted using AWS Sigv4"},"access_key_statuses":{"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of access key statuses"},"account_alias":{"expression":{"references":["aws_iam_account_alias.account_alias[0].account_alias","aws_iam_account_alias.account_alias[0]","aws_iam_account_alias.account_alias"]},"description":"AWS account alias"},"account_password_policy":{"expression":{"references":["aws_iam_account_password_policy.password_policy[0]","aws_iam_account_password_policy.password_policy"]},"description":"IAM account password policy"},"group_arns":{"expression":{"references":["aws_iam_group.groups"]},"description":"Map of group ARNs"},"group_names":{"expression":{"references":["aws_iam_group.groups"]},"description":"Map of group names"},"group_unique_ids":{"expression":{"references":["aws_iam_group.groups"]},"description":"Map of group unique IDs"},"groups":{"expression":{"references":["aws_iam_group.groups"]},"description":"Map of IAM groups created"},"iam_summary":{"expression":{"references":["aws_iam_user.users","aws_iam_role.roles","aws_iam_group.groups","aws_iam_policy.policies","aws_iam_instance_profile.this","aws_iam_access_key.user_keys","aws_iam_user_login_profile.user_login","aws_iam_user_ssh_key.this","aws_iam_saml_provider.saml_providers","aws_iam_openid_connect_provider.oidc_providers","aws_iam_service_linked_role.service_linked_roles","aws_iam_server_certificate.server_certificates","aws_iam_virtual_mfa_device.virtual_mfa_devices","aws_iam_account_alias.account_alias[0].account_alias","aws_iam_account_alias.account_alias[0]","aws_iam_account_alias.account_alias","aws_iam_account_password_policy.password_policy[0]","aws_iam_account_password_policy.password_policy"]},"description":"Summary of all IAM resources created"},"instance_profile_arns":{"expression":{"references":["aws_iam_instance_profile.this"]},"description":"Map of instance profile ARNs"},"instance_profile_ids":{"expression":{"references":["aws_iam_instance_profile.this"]},"description":"Map of instance profile IDs"},"instance_profile_names":{"expression":{"references":["aws_iam_instance_profile.this"]},"description":"Map of instance profile names"},"instance_profile_unique_ids":{"expression":{"references":["aws_iam_instance_profile.this"]},"description":"Map of instance profile unique IDs"},"instance_profiles":{"expression":{"references":["aws_iam_instance_profile.this"]},"description":"Map of instance profiles created (legacy format)"},"login_profile_encrypted_passwords":{"expression":{"references":["aws_iam_user_login_profile.user_login"]},"description":"Map of encrypted passwords, base64 encoded"},"login_profile_key_fingerprints":{"expression":{"references":["aws_iam_user_login_profile.user_login"]},"description":"Map of PGP key fingerprints used to encrypt passwords"},"login_profile_passwords":{"sensitive":true,"expression":{"references":["aws_iam_user_login_profile.user_login"]},"description":"Map of user passwords"},"oidc_identity_providers":{"expression":{"references":["aws_iam_openid_connect_provider.oidc_providers"]},"description":"OIDC identity providers"},"policies":{"expression":{"references":["aws_iam_policy.policies"]},"description":"Map of IAM policies created"},"policy_arns":{"expression":{"references":["aws_iam_policy.policies"]},"description":"Map of policy names to ARNs"},"policy_ids":{"expression":{"references":["aws_iam_policy.policies"]},"description":"Map of policy IDs"},"policy_names":{"expression":{"references":["aws_iam_policy.policies"]},"description":"Map of policy names"},"role_arns":{"expression":{"references":["aws_iam_role.roles"]},"description":"Map of role names to ARNs"},"role_names":{"expression":{"references":["aws_iam_role.roles"]},"description":"Map of role names"},"role_unique_ids":{"expression":{"references":["aws_iam_role.roles"]},"description":"Map of role unique IDs"},"roles":{"expression":{"references":["aws_iam_role.roles"]},"description":"Map of IAM roles created"},"saml_identity_providers":{"expression":{"references":["aws_iam_saml_provider.saml_providers"]},"description":"SAML identity providers"},"server_certificates":{"expression":{"references":["aws_iam_server_certificate.server_certificates"]},"description":"Map of server certificates uploaded"},"service_linked_roles":{"expression":{"references":["aws_iam_service_linked_role.service_linked_roles"]},"description":"Map of service linked roles created"},"ssh_key_fingerprints":{"expression":{"references":["aws_iam_user_ssh_key.this"]},"description":"Map of SSH key fingerprints"},"ssh_key_public_key_ids":{"expression":{"references":["aws_iam_user_ssh_key.this"]},"description":"Map of SSH public key IDs"},"user_access_keys":{"sensitive":true,"expression":{"references":["aws_iam_access_key.user_keys"]},"description":"Map of IAM user access keys (legacy format)"},"user_arns":{"expression":{"references":["aws_iam_user.users"]},"description":"Map of user ARNs"},"user_login_profiles":{"sensitive":true,"expression":{"references":["aws_iam_user_login_profile.user_login"]},"description":"Map of user login profiles created"},"user_names":{"expression":{"references":["aws_iam_user.users"]},"description":"Map of user names"},"user_unique_ids":{"expression":{"references":["aws_iam_user.users"]},"description":"Map of user unique IDs"},"users":{"expression":{"references":["aws_iam_user.users"]},"description":"Map of IAM users created"},"virtual_mfa_devices":{"expression":{"references":["aws_iam_virtual_mfa_device.virtual_mfa_devices"]},"description":"Map of virtual MFA devices created"}},"resources":[{"address":"aws_iam_access_key.user_keys","mode":"managed","type":"aws_iam_access_key","name":"user_keys","provider_config_key":"aws","expressions":{"pgp_key":{"references":["each.value.pgp_key","each.value"]},"status":{"references":["each.value.access_key_status","each.value"]},"user":{"references":["aws_iam_user.users","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"aws_iam_account_alias.account_alias","mode":"managed","type":"aws_iam_account_alias","name":"account_alias","provider_config_key":"aws","expressions":{"account_alias":{"references":["var.iam_account_alias"]}},"schema_version":0,"count_expression":{"references":["var.iam_account_alias"]}},{"address":"aws_iam_account_password_policy.password_policy","mode":"managed","type":"aws_iam_account_password_policy","name":"password_policy","provider_config_key":"aws","expressions":{"allow_users_to_change_password":{"references":["var.iam_account_password_policy"]},"hard_expiry":{"references":["var.iam_account_password_policy"]},"max_password_age":{"references":["var.iam_account_password_policy"]},"minimum_password_length":{"references":["var.iam_account_password_policy"]},"password_reuse_prevention":{"references":["var.iam_account_password_policy"]},"require_lowercase_characters":{"references":["var.iam_account_password_policy"]},"require_numbers":{"references":["var.iam_account_password_policy"]},"require_symbols":{"references":["var.iam_account_password_policy"]},"require_uppercase_characters":{"references":["var.iam_account_password_policy"]}},"schema_version":0,"count_expression":{"references":["var.iam_account_password_policy"]}},{"address":"aws_iam_group.groups","mode":"managed","type":"aws_iam_group","name":"groups","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"path":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.groups"]}},{"address":"aws_iam_group_membership.group_membership","mode":"managed","type":"aws_iam_group_membership","name":"group_membership","provider_config_key":"aws","expressions":{"group":{"references":["aws_iam_group.groups","each.value.group_key","each.value"]},"name":{"references":["each.value.name","each.value"]},"users":{"references":["each.value.users","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.group_memberships"]},"depends_on":["aws_iam_user.users","aws_iam_group.groups"]},{"address":"aws_iam_group_policy_attachment.group_policy_attachments","mode":"managed","type":"aws_iam_group_policy_attachment","name":"group_policy_attachments","provider_config_key":"aws","expressions":{"group":{"references":["aws_iam_group.groups","each.value.group_key","each.value"]},"policy_arn":{"references":["each.value.policy_type","each.value","aws_iam_policy.policies","each.value.policy_key","each.value","each.value.policy_arn","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.group_policy_attachments"]},"depends_on":["aws_iam_group.groups","aws_iam_policy.policies"]},{"address":"aws_iam_instance_profile.instance_profiles","mode":"managed","type":"aws_iam_instance_profile","name":"instance_profiles","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"path":{"references":["each.value"]},"role":{"references":["aws_iam_role.roles","each.value.role_key","each.value"]},"tags":{"references":["var.common_tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.instance_profiles"]},"depends_on":["aws_iam_role.roles"]},{"address":"aws_iam_instance_profile.this","mode":"managed","type":"aws_iam_instance_profile","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["each.value.use_name_prefix","each.value","each.value.name","each.value"]},"name_prefix":{"references":["each.value.use_name_prefix","each.value","each.value.name","each.value"]},"path":{"references":["each.value.path","each.value"]},"role":{"references":["aws_iam_role.roles","each.key"]},"tags":{"references":["local.all_tags","each.value.tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.roles"]}},{"address":"aws_iam_openid_connect_provider.oidc_providers","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc_providers","provider_config_key":"aws","expressions":{"client_id_list":{"references":["each.value.client_id_list","each.value"]},"tags":{"references":["var.common_tags","each.value"]},"thumbprint_list":{"references":["each.value.thumbprint_list","each.value"]},"url":{"references":["each.value.url","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.iam_oidc_identity_providers"]}},{"address":"aws_iam_policy.policies","mode":"managed","type":"aws_iam_policy","name":"policies","provider_config_key":"aws","expressions":{"description":{"references":["each.value.description","each.value"]},"name":{"references":["each.value.name","each.value"]},"path":{"references":["each.value.path","each.value"]},"policy":{"references":["each.value.policy_document","each.value","each.value.policy_document","each.value","each.value.policy_file","each.value"]},"tags":{"references":["var.common_tags","each.value.tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.policies"]}},{"address":"aws_iam_role.roles","mode":"managed","type":"aws_iam_role","name":"roles","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.role_trust_policy","each.key"]},"description":{"references":["each.value.description","each.value"]},"force_detach_policies":{"constant_value":true},"max_session_duration":{"references":["each.value.max_session_duration","each.value"]},"name":{"references":["each.value.use_name_prefix","each.value","each.value.name","each.value"]},"name_prefix":{"references":["each.value.use_name_prefix","each.value","each.value.name","each.value"]},"path":{"references":["each.value.path","each.value"]},"permissions_boundary":{"references":["each.value.permissions_boundary","each.value"]},"tags":{"references":["local.all_tags","each.value.tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.roles"]}},{"address":"aws_iam_role_policy.inline","mode":"managed","type":"aws_iam_role_policy","name":"inline","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"policy":{"references":["data.aws_iam_policy_document.role_inline","each.key"]},"role":{"references":["aws_iam_role.roles","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.roles"]}},{"address":"aws_iam_role_policy_attachment.role_policy_attachments","mode":"managed","type":"aws_iam_role_policy_attachment","name":"role_policy_attachments","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value.policy_type","each.value","aws_iam_policy.policies","each.value.policy_key","each.value","each.value.policy_arn","each.value"]},"role":{"references":["aws_iam_role.roles","each.value.role_key","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.role_policy_attachments"]},"depends_on":["aws_iam_role.roles","aws_iam_policy.policies"]},{"address":"aws_iam_role_policy_attachment.this","mode":"managed","type":"aws_iam_role_policy_attachment","name":"this","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value.policy_arn","each.value"]},"role":{"references":["aws_iam_role.roles","each.value.role_key","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.roles"]}},{"address":"aws_iam_saml_provider.saml_providers","mode":"managed","type":"aws_iam_saml_provider","name":"saml_providers","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"saml_metadata_document":{"references":["each.value.saml_metadata_document","each.value","each.value.saml_metadata_document","each.value","each.value.saml_metadata_file","each.value"]},"tags":{"references":["var.common_tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.iam_saml_identity_providers"]}},{"address":"aws_iam_server_certificate.server_certificates","mode":"managed","type":"aws_iam_server_certificate","name":"server_certificates","provider_config_key":"aws","expressions":{"certificate_body":{"references":["each.value.certificate_body","each.value","each.value.certificate_body","each.value","each.value.certificate_file","each.value"]},"certificate_chain":{"references":["each.value.certificate_chain","each.value","each.value.certificate_chain","each.value","each.value.certificate_chain_file","each.value","each.value.certificate_chain_file","each.value"]},"name":{"references":["each.value.name","each.value"]},"path":{"references":["each.value"]},"private_key":{"references":["each.value.private_key","each.value","each.value.private_key","each.value","each.value.private_key_file","each.value"]},"tags":{"references":["var.common_tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.iam_server_certificates"]}},{"address":"aws_iam_service_linked_role.service_linked_roles","mode":"managed","type":"aws_iam_service_linked_role","name":"service_linked_roles","provider_config_key":"aws","expressions":{"aws_service_name":{"references":["each.value.aws_service_name","each.value"]},"custom_suffix":{"references":["each.value"]},"description":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.iam_service_linked_roles"]}},{"address":"aws_iam_user.users","mode":"managed","type":"aws_iam_user","name":"users","provider_config_key":"aws","expressions":{"force_destroy":{"references":["each.value.force_destroy","each.value"]},"name":{"references":["each.value.name","each.value"]},"path":{"references":["each.value.path","each.value"]},"permissions_boundary":{"references":["each.value.permissions_boundary","each.value"]},"tags":{"references":["local.all_tags","each.value.tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"aws_iam_user_login_profile.user_login","mode":"managed","type":"aws_iam_user_login_profile","name":"user_login","provider_config_key":"aws","expressions":{"password_length":{"references":["each.value.password_length","each.value"]},"password_reset_required":{"references":["each.value.password_reset_required","each.value"]},"pgp_key":{"references":["each.value.pgp_key","each.value"]},"user":{"references":["aws_iam_user.users","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"aws_iam_user_policy.inline","mode":"managed","type":"aws_iam_user_policy","name":"inline","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]},"policy":{"references":["data.aws_iam_policy_document.user_inline","each.key"]},"user":{"references":["aws_iam_user.users","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"aws_iam_user_policy_attachment.this","mode":"managed","type":"aws_iam_user_policy_attachment","name":"this","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value.policy_arn","each.value"]},"user":{"references":["aws_iam_user.users","each.value.user_key","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"aws_iam_user_policy_attachment.user_policy_attachments","mode":"managed","type":"aws_iam_user_policy_attachment","name":"user_policy_attachments","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value.policy_type","each.value","aws_iam_policy.policies","each.value.policy_key","each.value","each.value.policy_arn","each.value"]},"user":{"references":["aws_iam_user.users","each.value.user_key","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.user_policy_attachments"]},"depends_on":["aws_iam_user.users","aws_iam_policy.policies"]},{"address":"aws_iam_user_ssh_key.this","mode":"managed","type":"aws_iam_user_ssh_key","name":"this","provider_config_key":"aws","expressions":{"encoding":{"references":["each.value.ssh_key_encoding","each.value"]},"public_key":{"references":["each.value.ssh_public_key","each.value"]},"username":{"references":["aws_iam_user.users","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"aws_iam_virtual_mfa_device.virtual_mfa_devices","mode":"managed","type":"aws_iam_virtual_mfa_device","name":"virtual_mfa_devices","provider_config_key":"aws","expressions":{"path":{"references":["each.value"]},"tags":{"references":["var.common_tags","each.value"]},"virtual_mfa_device_name":{"references":["each.value.virtual_mfa_device_name","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.iam_virtual_mfa_devices"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["var.create"]}},{"address":"data.aws_iam_policy_document.role_inline","mode":"data","type":"aws_iam_policy_document","name":"role_inline","provider_config_key":"aws","expressions":{"override_policy_documents":{"references":["each.value.override_inline_policy_documents","each.value"]},"source_policy_documents":{"references":["each.value.source_inline_policy_documents","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.roles"]}},{"address":"data.aws_iam_policy_document.role_trust_policy","mode":"data","type":"aws_iam_policy_document","name":"role_trust_policy","provider_config_key":"aws","expressions":{"source_policy_documents":{"references":["each.value.assume_role_policy","each.value","each.value.assume_role_policy_file","each.value","each.value.assume_role_policy_file","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","var.roles"]}},{"address":"data.aws_iam_policy_document.user_inline","mode":"data","type":"aws_iam_policy_document","name":"user_inline","provider_config_key":"aws","expressions":{"override_policy_documents":{"references":["each.value.override_inline_policy_documents","each.value"]},"source_policy_documents":{"references":["each.value.source_inline_policy_documents","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"data.aws_kms_key.iam_kms","mode":"data","type":"aws_kms_key","name":"iam_kms","provider_config_key":"aws","expressions":{"key_id":{"references":["each.value.kms_key_alias","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.create","local.all_users"]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0,"count_expression":{"references":["var.create"]}}],"variables":{"common_tags":{"default":{},"description":"Common tags to be applied to all resources (legacy - use 'tags' instead)"},"create":{"default":true,"description":"Controls if resources should be created (affects all resources)"},"group_memberships":{"default":{},"description":"Map of group memberships"},"group_policy_attachments":{"default":{},"description":"Map of group policy attachments"},"groups":{"default":{},"description":"Map of IAM groups to create"},"iam_account_alias":{"default":null,"description":"AWS account alias for console login"},"iam_account_password_policy":{"default":null,"description":"IAM account password policy configuration"},"iam_oidc_identity_providers":{"default":{},"description":"Map of OIDC identity providers (GitHub Actions, etc.)"},"iam_saml_identity_providers":{"default":{},"description":"Map of SAML identity providers for federated access"},"iam_server_certificates":{"default":{},"description":"Map of server certificates to upload to IAM"},"iam_service_linked_roles":{"default":{},"description":"Map of service-linked roles for AWS services"},"iam_users":{"default":{},"description":"Enhanced IAM users with all features (legacy - merged with 'users')"},"iam_virtual_mfa_devices":{"default":{},"description":"Map of virtual MFA devices"},"instance_profiles":{"default":{},"description":"Map of instance profiles to create"},"policies":{"default":{},"description":"Map of IAM policies to create"},"role_policy_attachments":{"default":{},"description":"Map of role policy attachments"},"roles":{"default":{},"description":"Map of IAM roles to create with enhanced features"},"tags":{"default":{},"description":"A map of tags to add to all resources"},"user_policy_attachments":{"default":{},"description":"Map of user policy attachments"},"users":{"default":{},"description":"Map of IAM users to create with enhanced features"}}}},"kms":{"source":"git::https://github.com/Terraform-centilazed-pipline/tf-module.git//Module/KMS","expressions":{"aliases":{"references":["each.value.aliases","each.value","each.key"]},"custom_key_store_id":{"references":["each.value.custom_key_store_id","each.value"]},"deletion_window_in_days":{"references":["each.value.deletion_window_in_days","each.value"]},"description":{"references":["each.value.description","each.value","each.key"]},"enable_key_rotation":{"references":["each.value.enable_key_rotation","each.value"]},"enable_separate_multiregion":{"references":["each.value.enable_separate_multiregion","each.value"]},"grants":{"references":["each.value.grants","each.value"]},"ignore_changes_attributes":{"references":["each.value.ignore_changes_attributes","each.value"]},"key_material_base64":{"references":["each.value.key_material_base64","each.value"]},"key_spec":{"references":["each.value.key_spec","each.value"]},"key_usage":{"references":["each.value.key_usage","each.value"]},"multi_region":{"references":["each.value.multi_region","each.value"]},"origin":{"references":["each.value.origin","each.value"]},"policy_content":{"references":["each.value.policy_content","each.value"]},"prevent_destroy":{"references":["each.value.prevent_destroy","each.value"]},"replica_regions":{"references":["each.value.replica_regions","each.value"]},"rotation_period_in_days":{"references":["each.value.rotation_period_in_days","each.value"]},"tags":{"references":["each.value.tags","each.value"]},"valid_to":{"references":["each.value.valid_to","each.value"]},"xks_key_id":{"references":["each.value.xks_key_id","each.value"]}},"for_each_expression":{"references":["local.processed_kms_keys"]},"module":{"outputs":{"alias_names":{"expression":{"references":["aws_kms_alias.this"]},"description":"List of alias names"},"aliases":{"expression":{"references":["aws_kms_alias.this"]},"description":"Map of alias names to their ARNs"},"custom_key_store_id":{"expression":{"references":["var.custom_key_store_id"]},"description":"The ID of the custom key store used for the key"},"debug_info":{"expression":{"references":["var.aliases","var.aliases","var.grants","var.origin","var.key_material_base64","var.origin","var.custom_key_store_id","var.xks_key_id","var.rotation_period_in_days","var.prevent_destroy","var.enable_separate_multiregion"]},"description":"Debug information for troubleshooting"},"deletion_window_in_days":{"expression":{"references":["var.deletion_window_in_days"]},"description":"The deletion window in days"},"enable_key_rotation":{"expression":{"references":["var.enable_key_rotation"]},"description":"Whether key rotation is enabled"},"grant_ids":{"expression":{"references":["aws_kms_grant.this"]},"description":"List of grant IDs"},"grant_tokens":{"sensitive":true,"expression":{"references":["aws_kms_grant.this"]},"description":"List of grant tokens"},"grants":{"sensitive":true,"expression":{"references":["aws_kms_grant.this"]},"description":"List of grants created with their details"},"is_external_key":{"expression":{"references":["var.origin","var.key_material_base64"]},"description":"Whether this is an external key with imported material"},"key_arn":{"expression":{"references":["var.origin","var.key_material_base64","aws_kms_external_key.this","aws_kms_key.this"]},"description":"The Amazon Resource Name (ARN) of the key"},"key_enabled":{"expression":{"references":["var.origin","var.key_material_base64","aws_kms_external_key.this[0].enabled","aws_kms_external_key.this[0]","aws_kms_external_key.this","aws_kms_key.this[0].is_enabled","aws_kms_key.this[0]","aws_kms_key.this"]},"description":"Whether the key is enabled"},"key_id":{"expression":{"references":["local.effective_key_id"]},"description":"The globally unique identifier for the key"},"key_manager":{"expression":{"references":["var.origin"]},"description":"The manager of the KMS key (AWS or CUSTOMER)"},"key_origin":{"expression":{"references":["var.origin"]},"description":"The source of the key material for the KMS key"},"key_spec":{"expression":{"references":["var.key_spec"]},"description":"The type of key material in the CMK"},"key_usage":{"expression":{"references":["var.key_usage"]},"description":"The cryptographic operations for which you can use the key"},"kms_key_aliases":{"expression":{"references":["aws_kms_alias.this"]},"description":"All aliases associated with the KMS key"},"kms_key_arn":{"expression":{"references":["var.origin","var.key_material_base64","aws_kms_external_key.this","aws_kms_key.this"]},"description":"The Amazon Resource Name (ARN) of the key (alias for compatibility)"},"kms_key_id":{"expression":{"references":["local.effective_key_id"]},"description":"The ID of the KMS key"},"lifecycle_protection":{"expression":{"references":["var.prevent_destroy","var.ignore_changes_attributes","var.ignore_changes_attributes","var.prevent_destroy"]},"description":"Lifecycle protection settings applied to the key"},"module_version":{"expression":{"constant_value":"2.0"},"description":"Version of the KMS module"},"multi_region":{"expression":{"references":["var.multi_region"]},"description":"Whether the key is a multi-Region key"},"multi_region_info":{"expression":{"references":["var.multi_region","var.replica_regions","var.replica_regions","var.replica_regions"]},"description":"Information about multi-region key configuration"},"policy_content":{"sensitive":true,"expression":{"references":["var.policy_content","var.policy_content","var.policy"]},"description":"The policy content of the key"},"primary_multiregion_aliases":{"expression":{"references":["var.enable_separate_multiregion","aws_kms_alias.primary_multiregion","aws_kms_alias.primary_multiregion"]},"description":"The aliases created for the separate multi-region primary key"},"primary_multiregion_key_arn":{"expression":{"references":["var.enable_separate_multiregion","aws_kms_key.primary_multiregion[0].arn","aws_kms_key.primary_multiregion[0]","aws_kms_key.primary_multiregion"]},"description":"The Amazon Resource Name (ARN) of the separate multi-region primary key"},"primary_multiregion_key_id":{"expression":{"references":["var.enable_separate_multiregion","aws_kms_key.primary_multiregion[0].key_id","aws_kms_key.primary_multiregion[0]","aws_kms_key.primary_multiregion"]},"description":"The globally unique identifier for the separate multi-region primary key"},"rotation_period_in_days":{"expression":{"references":["var.rotation_period_in_days"]},"description":"The custom rotation period in days (null means default 365 days)"},"separate_multiregion_enabled":{"expression":{"references":["var.enable_separate_multiregion"]},"description":"Whether separate multi-region deployment is enabled"},"tags":{"expression":{"references":["local.merged_tags"]},"description":"The tags assigned to the key"},"xks_key_id":{"expression":{"references":["var.xks_key_id"]},"description":"The external key store key ID"}},"resources":[{"address":"aws_kms_alias.primary_multiregion","mode":"managed","type":"aws_kms_alias","name":"primary_multiregion","provider_config_key":"aws","expressions":{"name":{"references":["var.aliases","count.index","var.aliases","count.index","var.aliases","count.index"]},"target_key_id":{"references":["aws_kms_key.primary_multiregion[0].key_id","aws_kms_key.primary_multiregion[0]","aws_kms_key.primary_multiregion"]}},"schema_version":0,"count_expression":{"references":["var.enable_separate_multiregion","var.aliases","var.aliases"]}},{"address":"aws_kms_alias.this","mode":"managed","type":"aws_kms_alias","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["var.aliases","count.index","var.aliases","count.index","var.aliases","count.index"]},"target_key_id":{"references":["local.effective_key_id"]}},"schema_version":0,"count_expression":{"references":["var.aliases"]}},{"address":"aws_kms_external_key.this","mode":"managed","type":"aws_kms_external_key","name":"this","provider_config_key":"aws","expressions":{"bypass_policy_lockout_safety_check":{"references":["var.bypass_policy_lockout_safety_check"]},"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"key_material_base64":{"references":["var.key_material_base64"]},"multi_region":{"references":["var.multi_region"]},"policy":{"references":["var.policy_content","var.policy_content","var.policy"]},"tags":{"references":["local.merged_tags"]},"valid_to":{"references":["var.valid_to"]}},"schema_version":0,"count_expression":{"references":["var.origin","var.key_material_base64"]}},{"address":"aws_kms_grant.this","mode":"managed","type":"aws_kms_grant","name":"this","provider_config_key":"aws","expressions":{"grantee_principal":{"references":["var.grants","count.index"]},"key_id":{"references":["local.effective_key_id"]},"name":{"references":["var.grants","count.index"]},"operations":{"references":["var.grants","count.index"]},"retiring_principal":{"references":["var.grants","count.index"]}},"schema_version":0,"count_expression":{"references":["var.grants"]}},{"address":"aws_kms_key.primary_multiregion","mode":"managed","type":"aws_kms_key","name":"primary_multiregion","provider_config_key":"aws","expressions":{"customer_master_key_spec":{"references":["var.key_spec"]},"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"key_usage":{"references":["var.key_usage"]},"multi_region":{"constant_value":true},"policy":{"references":["var.policy_content","var.policy_content","var.policy"]},"rotation_period_in_days":{"references":["var.rotation_period_in_days"]},"tags":{"references":["local.merged_tags"]}},"schema_version":0,"count_expression":{"references":["var.enable_separate_multiregion"]}},{"address":"aws_kms_key.this","mode":"managed","type":"aws_kms_key","name":"this","provider_config_key":"aws","expressions":{"bypass_policy_lockout_safety_check":{"references":["var.bypass_policy_lockout_safety_check"]},"custom_key_store_id":{"references":["var.custom_key_store_id"]},"customer_master_key_spec":{"references":["var.key_spec"]},"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"references":["var.description"]},"enable_key_rotation":{"references":["var.enable_key_rotation"]},"key_usage":{"references":["var.key_usage"]},"multi_region":{"references":["var.multi_region"]},"policy":{"references":["var.policy_content","var.policy_content","var.policy"]},"rotation_period_in_days":{"references":["var.rotation_period_in_days"]},"tags":{"references":["local.merged_tags"]},"xks_key_id":{"references":["var.xks_key_id"]}},"schema_version":0,"count_expression":{"references":["var.origin","var.key_material_base64"]}}],"variables":{"aliases":{"default":[],"description":"List of aliases for the KMS key."},"bypass_policy_lockout_safety_check":{"default":false,"description":"A flag to indicate whether to bypass the key policy lockout safety check"},"custom_key_store_id":{"default":null,"description":"The ID of the CloudHSM custom key store to use for key creation"},"deletion_window_in_days":{"default":30,"description":"Duration in days after which the key is deleted after destruction of the resource"},"description":{"default":null,"description":"Description for the KMS key"},"enable_key_rotation":{"default":true,"description":"Specifies whether key rotation is enabled"},"enable_separate_multiregion":{"default":false,"description":"Enable separate multi-region primary key creation. When true, creates a dedicated multi-region primary key."},"environment":{"default":null,"description":"Environment name (e.g., dev, staging, prod)"},"fail_on_multiple_existing_keys":{"default":true,"description":"Fail deployment if multiple existing keys are found for the aliases"},"force_create_new_key":{"default":false,"description":"Force creation of a new KMS key even if aliases already exist"},"grants":{"default":[],"description":"List of grants for the KMS key. See README for structure."},"ignore_changes_attributes":{"default":[],"description":"List of attributes to ignore changes for in lifecycle block. Use [] to track all changes."},"key_id":{"default":null,"description":"Explicit key ID for existing keys (key ID, key ARN, or alias)"},"key_material_base64":{"default":null,"description":"Base64 encoded key material for BYOK (when origin = EXTERNAL)","sensitive":true},"key_spec":{"default":"SYMMETRIC_DEFAULT","description":"Specifies the type of key material in the CMK"},"key_usage":{"default":"ENCRYPT_DECRYPT","description":"Specifies the intended use of the key"},"multi_region":{"default":false,"description":"Indicates whether the KMS key is a multi-Region or regional key"},"origin":{"default":"AWS_KMS","description":"The source of the key material. Valid values: AWS_KMS, EXTERNAL, AWS_CLOUDHSM, EXTERNAL_KEY_STORE"},"policy":{"default":null,"description":"A valid policy JSON document for the KMS key (inline). Ignored if policy_content is set."},"policy_content":{"default":null,"description":"Policy content loaded from file (use file() in root module). Takes precedence over policy."},"prevent_destroy":{"default":true,"description":"Whether to prevent destruction of the key. Recommended for production keys."},"project":{"default":null,"description":"Project name for resource naming and tagging"},"region":{"default":null,"description":"AWS region for the KMS key"},"replica_regions":{"default":[],"description":"List of AWS regions where replica keys should be created for multi-region keys."},"rotation_period_in_days":{"default":null,"description":"Custom key rotation period in days (90-2560, only for symmetric keys with automatic rotation enabled)"},"tags":{"default":{},"description":"A map of tags to assign to the KMS key"},"valid_to":{"default":null,"description":"Time at which the imported key material expires (RFC3339 format). Example: 2026-12-31T23:59:59Z"},"xks_key_id":{"default":null,"description":"Identifies the external key for External Key Store (XKS). Required when origin = EXTERNAL_KEY_STORE"}}}},"s3":{"source":"git::https://github.com/Terraform-centilazed-pipline/tf-module.git//Module/S3","expressions":{"common_tags":{"references":["var.common_tags"]},"s3_buckets":{"references":["local.processed_s3_buckets"]}},"count_expression":{"references":["local.processed_s3_buckets"]},"module":{"outputs":{"bucket_cors":{"expression":{"references":["aws_s3_bucket_cors_configuration.cors"]},"description":"Map of S3 bucket CORS configurations"},"bucket_encryption":{"expression":{"references":["aws_s3_bucket_server_side_encryption_configuration.encryption"]},"description":"Map of S3 bucket encryption configurations"},"bucket_lifecycle":{"expression":{"references":["aws_s3_bucket_lifecycle_configuration.lifecycle"]},"description":"Map of S3 bucket lifecycle configurations"},"bucket_logging":{"expression":{"references":["aws_s3_bucket_logging.logging"]},"description":"Map of S3 bucket logging configurations"},"bucket_notifications":{"expression":{"references":["aws_s3_bucket_notification.notifications"]},"description":"Map of S3 bucket notification configurations"},"bucket_policies":{"expression":{"references":["aws_s3_bucket_policy.bucket_policies"]},"description":"Map of S3 bucket policies"},"bucket_public_access_block":{"expression":{"references":["aws_s3_bucket_public_access_block.public_access_block"]},"description":"Map of S3 bucket public access block configurations"},"bucket_replication":{"expression":{"references":["aws_s3_bucket_replication_configuration.replication"]},"description":"Map of S3 bucket replication configurations"},"bucket_versioning":{"expression":{"references":["aws_s3_bucket_versioning.versioning"]},"description":"Map of S3 bucket versioning configurations"},"bucket_website_endpoints":{"expression":{"references":["aws_s3_bucket_website_configuration.website"]},"description":"Map of S3 bucket website endpoints"},"s3_buckets":{"expression":{"references":["aws_s3_bucket.buckets"]},"description":"Map of S3 buckets created"}},"resources":[{"address":"aws_s3_bucket.buckets","mode":"managed","type":"aws_s3_bucket","name":"buckets","provider_config_key":"aws","expressions":{"bucket":{"references":["each.value.bucket_name","each.value"]},"force_destroy":{"references":["each.value.force_destroy","each.value"]},"tags":{"references":["var.common_tags","each.value.tags","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]}},{"address":"aws_s3_bucket_cors_configuration.cors","mode":"managed","type":"aws_s3_bucket_cors_configuration","name":"cors","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_lifecycle_configuration.lifecycle","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"lifecycle","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]}},"schema_version":1,"for_each_expression":{"references":["local.lifecycle_configs"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_logging.logging","mode":"managed","type":"aws_s3_bucket_logging","name":"logging","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"target_bucket":{"references":["each.value.logging.target_bucket","each.value.logging","each.value"]},"target_prefix":{"references":["each.value.logging.target_prefix","each.value.logging","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_notification.notifications","mode":"managed","type":"aws_s3_bucket_notification","name":"notifications","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"eventbridge":{"references":["each.value.notifications.eventbridge","each.value.notifications","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_policy.bucket_policies","mode":"managed","type":"aws_s3_bucket_policy","name":"bucket_policies","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"policy":{"references":["each.value.bucket_policy","each.value","each.value.bucket_policy","each.value","each.value.bucket_policy_file","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets","aws_s3_bucket_public_access_block.public_access_block"]},{"address":"aws_s3_bucket_public_access_block.public_access_block","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"public_access_block","provider_config_key":"aws","expressions":{"block_public_acls":{"references":["each.value.public_access_block.block_public_acls","each.value.public_access_block","each.value"]},"block_public_policy":{"references":["each.value.public_access_block.block_public_policy","each.value.public_access_block","each.value"]},"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"ignore_public_acls":{"references":["each.value.public_access_block.ignore_public_acls","each.value.public_access_block","each.value"]},"restrict_public_buckets":{"references":["each.value.public_access_block.restrict_public_buckets","each.value.public_access_block","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_replication_configuration.replication","mode":"managed","type":"aws_s3_bucket_replication_configuration","name":"replication","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"role":{"references":["each.value.replication.role_arn","each.value.replication","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket_versioning.versioning"]},{"address":"aws_s3_bucket_server_side_encryption_configuration.encryption","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"encryption","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["local.s3_kms_keys","each.key"]},"sse_algorithm":{"references":["each.value.encryption.sse_algorithm","each.value.encryption","each.value"]}}],"bucket_key_enabled":{"references":["each.value.encryption","each.value"]}}]},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_versioning.versioning","mode":"managed","type":"aws_s3_bucket_versioning","name":"versioning","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]},"versioning_configuration":[{"status":{"references":["each.value"]}}]},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"aws_s3_bucket_website_configuration.website","mode":"managed","type":"aws_s3_bucket_website_configuration","name":"website","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.buckets","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]},"depends_on":["aws_s3_bucket.buckets"]},{"address":"data.aws_kms_key.s3_kms","mode":"data","type":"aws_kms_key","name":"s3_kms","provider_config_key":"aws","expressions":{"key_id":{"references":["each.value.encryption.kms_key_alias","each.value.encryption","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.s3_buckets"]}}],"variables":{"common_tags":{"default":{},"description":"Common tags to be applied to all resources"},"s3_buckets":{"default":{},"description":"Map of S3 buckets to create"}}}}},"variables":{"accounts":{"default":{},"description":"Account configurations for multi-account deployment"},"assume_role_name":{"default":"TerraformExecutionRole","description":"IAM role name to assume for cross-account access"},"aws_regions":{"default":{"ew1":{"code":"ew1","name":"eu-west-1"},"use1":{"code":"use1","name":"us-east-1"},"usw2":{"code":"usw2","name":"us-west-2"}},"description":"AWS regions mapping"},"common_tags":{"default":{"Environment":"dev","ManagedBy":"terraform","Owner":"DevOps-Team","Project":"S3-Management"},"description":"Common tags to be applied to all resources"},"iam_policies":{"default":{},"description":"Map of IAM policies to create"},"iam_role_name":{"default":"","description":"IAM role name for S3 and KMS access"},"iam_roles":{"default":{},"description":"Map of IAM roles to create"},"iam_users":{"default":{},"description":"Map of IAM users to create"},"kms_key_id":{"default":"","description":"KMS key ID for S3 bucket encryption (existing custom key)"},"kms_keys":{"default":{},"description":"Map of KMS keys to create"},"s3_buckets":{"default":{},"description":"S3 bucket configurations"},"terraform_session_name":{"default":"terraform-deployment-session","description":"Unique session name for Terraform execution (auto-injected by controller: team-environment-deployment)"},"update_kms_policy":{"default":false,"description":"Whether to update the KMS key policy to allow S3 and IAM role access"},"yaml_config_file":{"default":"","description":"Path to YAML configuration file for S3 buckets (alternative to s3_buckets variable)"}}}},"relevant_attributes":[{"resource":"module.iam.aws_iam_instance_profile.this","attribute":[]},{"resource":"module.iam.aws_iam_user_login_profile.user_login","attribute":[]},{"resource":"module.kms.aws_kms_grant.this","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_versioning.versioning","attribute":[]},{"resource":"module.kms.aws_kms_alias.primary_multiregion","attribute":[]},{"resource":"data.aws_region.current","attribute":["id"]},{"resource":"module.s3.aws_s3_bucket_policy.bucket_policies","attribute":[]},{"resource":"module.iam[0].aws_iam_role.roles","attribute":[]},{"resource":"module.kms.aws_kms_alias.this","attribute":[]},{"resource":"module.iam[0].data.aws_partition.current[0]","attribute":["partition"]},{"resource":"module.s3[0].aws_s3_bucket_cors_configuration.cors","attribute":[]},{"resource":"module.iam.data.aws_partition.current[0]","attribute":["partition"]},{"resource":"module.iam.aws_iam_account_password_policy.password_policy[0]","attribute":[]},{"resource":"module.kms.aws_kms_external_key.this","attribute":[]},{"resource":"module.iam.aws_iam_access_key.user_keys","attribute":[]},{"resource":"module.iam.data.aws_caller_identity.current[0]","attribute":["account_id"]},{"resource":"module.kms.aws_kms_key.primary_multiregion[0]","attribute":["arn"]},{"resource":"data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.s3[0].aws_s3_bucket_website_configuration.website","attribute":[]},{"resource":"module.iam.aws_iam_user_ssh_key.this","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_lifecycle_configuration.lifecycle","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_logging.logging","attribute":[]},{"resource":"module.iam[0].aws_iam_user.users","attribute":[]},{"resource":"module.kms.aws_kms_key.this[0]","attribute":["is_enabled"]},{"resource":"module.s3[0].aws_s3_bucket_notification.notifications","attribute":[]},{"resource":"module.iam.aws_iam_user.users","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_server_side_encryption_configuration.encryption","attribute":[]},{"resource":"module.iam.aws_iam_account_alias.account_alias[0]","attribute":["account_alias"]},{"resource":"module.s3.data.aws_kms_key.s3_kms","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_policy.bucket_policies","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_replication_configuration.replication","attribute":[]},{"resource":"module.iam[0].data.aws_iam_policy_document.role_trust_policy","attribute":[]},{"resource":"module.s3.aws_s3_bucket_website_configuration.website","attribute":[]},{"resource":"module.kms.aws_kms_external_key.this[0]","attribute":["enabled"]},{"resource":"module.iam.aws_iam_virtual_mfa_device.virtual_mfa_devices","attribute":[]},{"resource":"module.s3[0].data.aws_kms_key.s3_kms","attribute":[]},{"resource":"module.iam[0].data.aws_caller_identity.current[0]","attribute":["account_id"]},{"resource":"module.iam.aws_iam_role.roles","attribute":[]},{"resource":"module.s3.aws_s3_bucket_notification.notifications","attribute":[]},{"resource":"module.iam.aws_iam_saml_provider.saml_providers","attribute":[]},{"resource":"module.kms.aws_kms_key.this","attribute":[]},{"resource":"module.s3.aws_s3_bucket_cors_configuration.cors","attribute":[]},{"resource":"module.s3.aws_s3_bucket_lifecycle_configuration.lifecycle","attribute":[]},{"resource":"module.iam.aws_iam_group.groups","attribute":[]},{"resource":"module.kms.aws_kms_key.primary_multiregion[0]","attribute":["key_id"]},{"resource":"module.s3.aws_s3_bucket_public_access_block.public_access_block","attribute":[]},{"resource":"module.iam.aws_iam_service_linked_role.service_linked_roles","attribute":[]},{"resource":"module.s3.aws_s3_bucket_logging.logging","attribute":[]},{"resource":"module.iam.aws_iam_server_certificate.server_certificates","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket.buckets","attribute":[]},{"resource":"module.s3.aws_s3_bucket.buckets","attribute":[]},{"resource":"module.s3.aws_s3_bucket_replication_configuration.replication","attribute":[]},{"resource":"module.s3.aws_s3_bucket_server_side_encryption_configuration.encryption","attribute":[]},{"resource":"module.iam.data.aws_iam_policy_document.role_trust_policy","attribute":[]},{"resource":"module.iam.aws_iam_policy.policies","attribute":[]},{"resource":"module.s3[0].aws_s3_bucket_public_access_block.public_access_block","attribute":[]},{"resource":"module.s3.aws_s3_bucket_versioning.versioning","attribute":[]},{"resource":"module.iam.aws_iam_openid_connect_provider.oidc_providers","attribute":[]}],"checks":[{"address":{"kind":"var","module":"module.iam","name":"policies","to_display":"module.iam.var.policies"},"status":"pass"},{"address":{"kind":"var","module":"module.iam","name":"roles","to_display":"module.iam.var.roles"},"status":"pass"},{"address":{"kind":"var","module":"module.kms","name":"deletion_window_in_days","to_display":"module.kms.var.deletion_window_in_days"},"status":"pass"},{"address":{"kind":"var","module":"module.kms","name":"key_spec","to_display":"module.kms.var.key_spec"},"status":"pass"},{"address":{"kind":"var","module":"module.kms","name":"key_usage","to_display":"module.kms.var.key_usage"},"status":"pass"},{"address":{"kind":"var","module":"module.kms","name":"origin","to_display":"module.kms.var.origin"},"status":"pass"},{"address":{"kind":"var","module":"module.kms","name":"rotation_period_in_days","to_display":"module.kms.var.rotation_period_in_days"},"status":"pass"},{"address":{"kind":"var","module":"module.s3","name":"s3_buckets","to_display":"module.s3.var.s3_buckets"},"status":"pass","instances":[{"address":{"module":"module.s3[0]","to_display":"module.s3[0].var.s3_buckets"},"status":"pass"}]},{"address":{"kind":"var","name":"s3_buckets","to_display":"var.s3_buckets"},"status":"pass","instances":[{"address":{"to_display":"var.s3_buckets"},"status":"pass"}]}],"timestamp":"2025-11-29T00:55:34Z","applyable":true,"complete":true,"errored":false}
